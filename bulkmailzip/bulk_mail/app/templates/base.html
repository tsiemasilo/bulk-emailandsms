<!DOCTYPE html>
<html lang="en">
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<META http-equiv="Content-Style-Type" content="text/css">
<meta name="viewport" content="width=device-width, initial-scale=0.8">
<link rel="icon" type="image/x-icon" sizes="32x32" href="{{ url_for("static", filename=static_prefix+"favicon.ico") }}">
{% if js %}
<script type="text/javascript" src="{{ url_for("static", filename=static_prefix+"js/jquery.js") }}"></script>
<script type="text/javascript">
var do_alert;

$(document).ready( function() {
try {

do_alert = function(s_in) {
        s_in = String(s_in).replace("\n", "<br />");
        $("#div_alert").show();
        //document.getElementById("div_alert").innerHTML = s_in;
        $("#div_alert").html(s_in);
}//end of do_alert function

$.fn.redraw =function(){
        $(this).each(function(){var redraw =this.offsetHeight;});
};//end of $.fn.redraw function

var s_server_url = "{{ url }}";
$.each($("ul.nav").find("a"), function(ix, a) {
    if (s_server_url.endsWith($(a).attr("href"))) { $(a).attr("aria-current", "true"); } else { $(a).attr("aria-current", ""); }
});// end of .each on nav links
// alert([s_url, s_server_url]);

var s_msg = "";
{% with messages = get_flashed_messages() %}
{% if messages %}
s_msg = "{{ messages[-1] }}";
{% endif %}
{% endwith %}
if (String(s_msg).length>0) {
    window.setTimeout( function() {
    $("#div_alert").toggleClass("warning");
    do_alert(s_msg);
    }, 300);
}

} catch(e) {
    var s_err = String(e.name) + "\nmessage:" + String(e.message);
    s_err = (typeof(e.lineNumber)!="undefined") ? s_err + "\nline:" + String(e.lineNumber) : s_err;
    alert("Error! " + s_err);
}//end of catch
});//end of document ready
</script>
{% endif %}{# end of js check #}
<title>Bulk Mail - {% block title %}{% endblock %}</title>
<style>
{% include("combined_styles.css") %}
</style>
<link rel="stylesheet" href="{{ url_for("static", filename=static_prefix+"js/slim_menu/slimmenu.min.css") }}" type="text/css">
<script type="text/javascript" src="{{ url_for("static", filename=static_prefix+"js/slim_menu/jquery.slimmenu.min.js") }}"></script>
<script type="text/javascript">
$(document).ready( function() {
$("#ul_navigation").slimmenu({
    resizeWidth: "800",
    initiallyVisible: false,
    collapserTitle: "{{ s_title }}",
    animSpeed: "medium",
    easingEffect: null,
    indentChildren: false,
    childrenIndenter: ""
});// end of .slimmenu() initialisation

// Post-init cleanup: remove injected sub-toggle elements and fix dropdown styles
var $nav = $("#ul_navigation");
$nav.find(".sub-toggle").remove();
$nav.find("> li > ul").css({
    "width": "auto",
    "min-width": "260px",
    "max-width": "none",
    "padding": "0.5rem 0"
});
$nav.find("> li > ul > li").css({
    "padding": "0",
    "margin": "0",
    "border": "none",
    "background": "transparent"
});
$nav.find("> li > ul > li > a").css({
    "padding": "0.65rem 1.25rem",
    "display": "block",
    "width": "auto",
    "text-indent": "0"
});
});// end of document.ready for slim_menu init
</script>
{% block head_extra %}{% endblock head_extra %}
</head>
<body>
{% from "macros/console.html" import console_replacement %}
{{ console_replacement() }}
<header>
<div class="header-container">
<div class="logo-area"></div>
<nav>
<ul class="nav slimmenu" role="navigation" id="ul_navigation">
{% if current_user.id %}
{% if current_user.bl_admin %}
<li><a href="{{ url_for("main.index") }}">Landing page</a></li>
{% endif %}
{% if current_user.bl_admin %}
<li><a href="{{ url_for("main.id_types") }}">I.D. Types</a></li>
<li>Company activities<ul class="slimmenu">
<li><a href="{{ url_for("main.companies") }}">Companies</a></li>
<li><a href="{{ url_for("main.company_users", i_company_id=0) }}">Company Users</a></li>
</ul></li><!-- end of Company activities submenu -->
{% else %}
<li>Customer activities<ul class="slimmenu">
<li><a href="{{ url_for("main.customers", i_company_id=current_user.i_company_id) }}">Customers</a></li>
<li><a href="{{ url_for("main.customer_groups", i_company_id=current_user.i_company_id) }}">Customer Groups</a></li>
</ul></li><!-- end of Customer activities submenu -->
<li>E-mail activities<ul class="slimmenu">
<li><a href="{{ url_for("main.email_templates") }}">E-Mail Templates</a></li>
<li><a href="{{ url_for("main.campaigns") }}">E-Mail Campaigns</a></li>
<li><a href="{{ url_for("main.queued_emails") }}">Queued E-Mails</a></li>
<li><a href="{{ url_for("main.campaign_reports") }}">E-Mail Campaign Sending Reports</a></li>
</ul></li><!-- end of E-mail activities submenu -->
<li><a href="{{ url_for("main.company_email_addresses") }}">E-Mail Addresses</a></li>
{% endif %}{# end of checking for bl_admin #}
<li><a href="{{ url_for("auth.logout") }}">Logout</a></li>
{% else %}
<li><a href="{{ url_for("auth.login") }}">Login</a></li>
{% endif %}
</ul>
</nav>
</div><!-- end of div.header-container -->
</header>

<main>
<div class="background-container"></div>
<div class="content-container content">
<div id="div_alert" style="text-align: center; position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); background-color: #1f2937; color: #ffffff; padding: 1rem 1.5rem; border-radius: 8px; z-index: 9999; display: none; max-width: 90%; min-width: 280px; box-shadow: 0 10px 40px rgba(0,0,0,0.25); font-size: 0.9375rem; font-weight: 500; border-left: 4px solid #22c55e;" aria-live="assertive">&nbsp;</div>
{% block content %}{% endblock %}
</div><!-- end of div.content -->
</main>
</body>
</html>