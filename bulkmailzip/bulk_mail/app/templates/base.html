<!DOCTYPE html>
<html lang="en">
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<META http-equiv="Content-Style-Type" content="text/css">
<meta name="viewport" content="width=device-width, initial-scale=0.8">
<link rel="icon" type="image/x-icon" sizes="32x32" href="{{ url_for("static", filename=static_prefix+"favicon.ico") }}">
{% if js %}
<script type="text/javascript" src="{{ url_for("static", filename=static_prefix+"js/jquery.js") }}"></script>
<script type="text/javascript">
var showToast;

$(document).ready( function() {
try {

var toastCounter = 0;

showToast = function(message, type, duration) {
    type = type || 'info';
    duration = duration || 5000;
    
    var icons = {
        success: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>',
        error: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',
        warning: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',
        info: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>'
    };
    
    var toastId = 'toast-' + (++toastCounter);
    var toast = $('<div class="toast toast-' + type + '" id="' + toastId + '">' +
        '<div class="toast-icon">' + icons[type] + '</div>' +
        '<div class="toast-content">' +
            '<div class="toast-message">' + String(message).replace(/\n/g, "<br />") + '</div>' +
        '</div>' +
        '<button class="toast-close" aria-label="Close">' +
            '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>' +
        '</button>' +
        '<div class="toast-progress"><div class="toast-progress-bar"></div></div>' +
    '</div>');
    
    $('#toast-container').append(toast);
    
    setTimeout(function() { toast.addClass('toast-show'); }, 10);
    
    toast.find('.toast-progress-bar').css('animation-duration', duration + 'ms');
    
    var dismissToast = function() {
        toast.removeClass('toast-show');
        setTimeout(function() { toast.remove(); }, 300);
    };
    
    toast.find('.toast-close').on('click', dismissToast);
    
    var autoClose = setTimeout(dismissToast, duration);
    
    toast.on('mouseenter', function() {
        clearTimeout(autoClose);
        toast.find('.toast-progress-bar').css('animation-play-state', 'paused');
    });
    
    toast.on('mouseleave', function() {
        toast.find('.toast-progress-bar').css('animation-play-state', 'running');
        autoClose = setTimeout(dismissToast, 2000);
    });
};

var do_alert = function(s_in, type) {
    showToast(s_in, type || 'info');
};

$.fn.redraw =function(){
        $(this).each(function(){var redraw =this.offsetHeight;});
};//end of $.fn.redraw function

var s_server_url = "{{ url }}";
$.each($("ul.nav").find("a"), function(ix, a) {
    if (s_server_url.endsWith($(a).attr("href"))) { $(a).attr("aria-current", "true"); } else { $(a).attr("aria-current", ""); }
});// end of .each on nav links

var s_msg = "";
{% with messages = get_flashed_messages() %}
{% if messages %}
s_msg = "{{ messages[-1] }}";
{% endif %}
{% endwith %}
if (String(s_msg).length>0) {
    window.setTimeout( function() {
        showToast(s_msg, 'success');
    }, 300);
}

} catch(e) {
    var s_err = String(e.name) + "\nmessage:" + String(e.message);
    s_err = (typeof(e.lineNumber)!="undefined") ? s_err + "\nline:" + String(e.lineNumber) : s_err;
    alert("Error! " + s_err);
}//end of catch
});//end of document ready
</script>
{% endif %}{# end of js check #}
<title>Bulk Mail - {% block title %}{% endblock %}</title>
<style>
{% include("combined_styles.css") %}
</style>
<link rel="stylesheet" href="{{ url_for("static", filename=static_prefix+"js/slim_menu/slimmenu.min.css") }}" type="text/css">
<script type="text/javascript" src="{{ url_for("static", filename=static_prefix+"js/slim_menu/jquery.slimmenu.min.js") }}"></script>
<script type="text/javascript">
$(document).ready( function() {
$("#ul_navigation").slimmenu({
    resizeWidth: "800",
    initiallyVisible: false,
    collapserTitle: "{{ s_title }}",
    animSpeed: "medium",
    easingEffect: null,
    indentChildren: false,
    childrenIndenter: ""
});// end of .slimmenu() initialisation

// Post-init cleanup: remove injected sub-toggle elements and fix dropdown styles
var $nav = $("#ul_navigation");
$nav.find(".sub-toggle").remove();
$nav.find("> li > ul").css({
    "width": "auto",
    "min-width": "260px",
    "max-width": "none",
    "padding": "0.5rem 0"
});
$nav.find("> li > ul > li").css({
    "padding": "0",
    "margin": "0",
    "border": "none",
    "background": "transparent"
});
$nav.find("> li > ul > li > a").css({
    "padding": "0.65rem 1.25rem",
    "display": "block",
    "width": "auto",
    "text-indent": "0"
});
});// end of document.ready for slim_menu init
</script>
{% block head_extra %}{% endblock head_extra %}
</head>
<body>
{% from "macros/console.html" import console_replacement %}
{{ console_replacement() }}
<header>
<div class="header-container">
<div class="logo-area"></div>
<nav>
<ul class="nav slimmenu" role="navigation" id="ul_navigation">
{% if current_user.id %}
{% if current_user.bl_admin %}
<li><a href="{{ url_for("main.index") }}">Landing page</a></li>
{% endif %}
{% if current_user.bl_admin %}
<li><a href="{{ url_for("main.id_types") }}">I.D. Types</a></li>
<li>Company activities<ul class="slimmenu">
<li><a href="{{ url_for("main.companies") }}">Companies</a></li>
<li><a href="{{ url_for("main.company_users", i_company_id=0) }}">Company Users</a></li>
</ul></li><!-- end of Company activities submenu -->
{% else %}
<li>Customer activities<ul class="slimmenu">
<li><a href="{{ url_for("main.customers", i_company_id=current_user.i_company_id) }}">Customers</a></li>
<li><a href="{{ url_for("main.customer_groups", i_company_id=current_user.i_company_id) }}">Customer Groups</a></li>
</ul></li><!-- end of Customer activities submenu -->
<li>E-mail activities<ul class="slimmenu">
<li><a href="{{ url_for("main.email_templates") }}">E-Mail Templates</a></li>
<li><a href="{{ url_for("main.campaigns") }}">E-Mail Campaigns</a></li>
<li><a href="{{ url_for("main.queued_emails") }}">Queued E-Mails</a></li>
<li><a href="{{ url_for("main.campaign_reports") }}">E-Mail Campaign Sending Reports</a></li>
</ul></li><!-- end of E-mail activities submenu -->
<li><a href="{{ url_for("main.company_email_addresses") }}">E-Mail Addresses</a></li>
{% endif %}{# end of checking for bl_admin #}
<li><a href="{{ url_for("auth.logout") }}">Logout</a></li>
{% else %}
<li><a href="{{ url_for("auth.login") }}">Login</a></li>
{% endif %}
</ul>
</nav>
</div><!-- end of div.header-container -->
</header>

<div id="toast-container" aria-live="assertive"></div>
<main>
<div class="background-container"></div>
<div class="content-container content">
{% block content %}{% endblock %}
</div><!-- end of div.content -->
</main>
</body>
</html>